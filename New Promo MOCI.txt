@startuml

participant Controler
participant DBHandler
participant PromoHandler

note left : aaaa_aaaa is a variable containing the promo year.

	activate Controler
	--> Controler : addNewPromo(aaaa_aaaa)
	activate DBHandler
	Controler --> DBHandler : isPromoExisting(aaaa_aaaa)
	DBHandler --> Controler : PromoExists = isPromoExisting(aaaa_aaaa)
	activate PromoHandler
	
	alt PromoExists = true
		Controler --> PromoHandler : RetrievePromo(aaaa_aaaa)
		PromoHandler --> DBHandler : GetPromo(aaaa_aaaa)
		DBHandler --> PromoHandler : promo = getPromo(aaaa_aaaa)
		PromoHandler --> Controler : promo

	else PromoExists = false
		Controler --> PromoHandler : CreatePromo(aaaa_aaaa)
		PromoHandler --> PromoHandler : promo = CreatePromo(aaaa_aaaa)
		PromoHandler --> DBHandler : GetStudentList(aaaa_aaaa)
		DBHandler --> PromoHandler : StudentList = getStudentList(aaaa_aaaa)
		loop for each student in StudentList
            		PromoHandler --> PromoHandler : add(promo,student)
		end
		PromoHandler --> Controler : promo

	end
	
	<-- Controler : Show(promo)
	--> Controler : SaveModif(promo)
	Controler --> PromoHandler : SaveModif(promo)
	PromoHandler --> DBHandler : SaveModif(promo)
	deactivate DBHandler
	deactivate PromoHandler
	deactivate Controler

@enduml
